# 将图片转为JSON格式来生成适配动态粒子壁纸的文件

> 动态粒子壁纸steam创意工坊:https://steamcommunity.com/sharedfiles/filedetails/?id=3486243270
> 
> 动态粒子壁纸GitHub项目:https://github.com/C-S-Z-911/arknights-PRTS-particle-wallpaper

## [功能特性]
- **图像转粒子数据**
  - 支持PNG、JPG、JPEG图像格式
  - 可设置采样间隔控制粒子密度
  - 生成动态粒子壁纸兼容的JSON格式
- **粒子数据转图像**
  - 从JSON文件还原图像
  - 支持透明背景
  - 可选择黑白背景预览
- **图形界面**
  - 实时预览转换结果
  - 显示图像尺寸和粒子数量
  - 错误提示和警告信息
  - 一键保存转换结果

## [使用说明]
- **图片/json 路径**：输入源图像或JSON文件路径
- **采样间隔**：控制粒子密度（值越大粒子越稀疏）
- **背景色选择**：勾选为白色背景,不勾选为黑色背景,导出将导出透明背景png文件
- **生成预览**：在预览图位置显示转换结果
- **保存图像**：将转换结果保存为PNG
- **保存JSON**：将粒子数据保存为JSON文件
- **预览图**：显示转换后的图像
- **信息**：显示图像信息和操作提示

## [json格式]
```
// 粒子配置
{
  "count": 4237,  //粒子数量,上线为10000
  "size": {
    "width": 490,  //宽(x)
    "height": 198  //高(h)
  },
  "points": [  //粒子生成位置及颜色(rgba)
    [147,6,"#f2f2f25f"],
    [150,6,"#f2f2f25f"],
    ...
  ]
}
```

## [注意事项]
- **图像大小请控制在512*512左右以便拥有更好的显示效果**
- **采样间隔必须是正整数**
- **JSON文件必须是符合要求的格式才能转为图片**
- **性能考虑**
  - 高分辨率图像或小采样间隔会产生大量粒子
  - 粒子数量超过10000时动态粒子壁纸可能不完整
  - 建议先使用小采样间隔预览后再调整
- **透明度处理**
  - 完全透明的像素会被忽略
  - 半透明像素会保留透明度信息
- **输出**
  - 输出位置为文件执行位置
  - 图像输出为PNG格式保留透明度
  - JSON格式包含尺寸、粒子数和坐标颜色数据

## 关于
- **依赖项**
  - Python 3.6+
  - PyQt5
  - Pillow (PIL)
